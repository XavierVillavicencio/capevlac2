(()=>{var a;(a=jQuery)(document).ready((function(){a("input[type=radio][name=_lp_course_result]").on("change",(function(e){"evaluate_final_assignment"!==e.target.value&&a(".lp-metabox-evaluate-assignment").remove()})),a(".lp-metabox-evaluate-radio").on("click",(function(e){e.preventDefault();const t=a(this),n=a(this).data("id"),s=t.text();a(".lp-metabox-evaluate-assignment").remove(),t.text(t.data("loading")),a.ajax({url:ajaxurl,type:"POST",data:{action:"lp_assignment_update_evalute_assignments",course_id:n}}).done((function(a){t.closest("label").append(a.message),t.text(s)}))})),a(".lp-meta-box--assignments").length>0&&(a("#_lp_mark").on("change",(function(){a("._lp_mark_field").find(".learn-press-tip-floating").remove();const e=parseFloat(a("#_lp_mark").val()),t=parseFloat(a("#_lp_passing_grade").val());e<t&&(a("._lp_mark_field").append('<div class="learn-press-tip-floating">'+lpAssignment.invalid_mark+"</div>"),a("#_lp_mark").val(t))})),a("#_lp_passing_grade").on("change keydown paste input",(function(){a("._lp_passing_grade_field").find(".learn-press-tip-floating").remove();const e=parseFloat(a("#_lp_mark").val());parseFloat(a("#_lp_passing_grade").val())>e&&(a("._lp_passing_grade_field").append('<div class="learn-press-tip-floating">'+lpAssignment.invalid_mark_grade+"</div>"),a("#_lp_passing_grade").val(e))}))),a(".admin_page_assignment-student .wp-list-table td.column-actions .send-mail").on("click",(function(e){e.preventDefault();const t=a(this).parent(".assignment-students-actions"),n=t.data("user_id"),s=t.data("assignment_id");confirm(lpAssignment.resend_evaluated_mail)&&a.ajax({url:ajaxurl,type:"POST",data:{action:"lp_assignment_send_evaluated_mail",user_id:n,assignment_id:s}}).done((function(a){const e=LP.parseJSON(a);alert(e.message)}))})),a(".admin_page_assignment-student .wp-list-table td.column-actions .delete").on("click",(function(e){e.preventDefault();const t=a(this).parent(".assignment-students-actions"),n=t.data("user_id"),s=t.data("assignment_id");confirm(lpAssignment.delete_submission)&&a.ajax({url:ajaxurl,type:"POST",data:{action:"lp_assignment_delete_submission",user_id:n,assignment_id:s}}).done((function(a){const e=LP.parseJSON(a);"fail"===e.status&&alert(e.message),location.reload()}))})),a(".admin_page_assignment-student .wp-list-table td.column-actions .reset").on("click",(function(e){e.preventDefault();const t=a(this).parent(".assignment-students-actions").data("user-item-id");confirm(lpAssignment.reset_result)&&a.ajax({url:ajaxurl,type:"POST",data:{action:"lp_assignment_reset_result",user_item_id:t}}).complete((function(a){const e=LP.parseJSON(a);"fail"===e.status&&alert(e.message),location.reload()}))}))}))})();